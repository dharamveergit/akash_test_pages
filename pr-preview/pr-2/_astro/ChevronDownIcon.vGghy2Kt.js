import{r as c,R as _}from"./index.9AF9g4V4.js";import{l as w,e as q,o as I,S as Q,D as E,y as P,c as G,u as H,d as F,X as T,I as N,p as V,C as X,a as m,r as z,b as $}from"./transition.cYFSBffZ.js";import{h as J,n as Y,a as Z,T as ee,_ as te,M as U,D as W,I as re}from"./use-owner.zs_RELrr.js";import{s as ne}from"./use-resolve-button-type.FOQ-GfPc.js";function ae({container:e,accept:n,walk:t,enabled:u=!0}){let o=c.useRef(n),i=c.useRef(t);c.useEffect(()=>{o.current=n,i.current=t},[n,t]),w(()=>{if(!e||!u)return;let a=q(e);if(!a)return;let r=o.current,s=i.current,f=Object.assign(y=>r(y),{acceptNode:r}),v=a.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,f,!1);for(;v.nextNode();)s(v.currentNode)},[e,u,o,i])}function ue(e){throw new Error("Unexpected object: "+e)}var b=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(b||{});function oe(e,n){let t=n.resolveItems();if(t.length<=0)return null;let u=n.resolveActiveIndex(),o=u??-1,i=(()=>{switch(e.focus){case 0:return t.findIndex(a=>!n.resolveDisabled(a));case 1:{let a=t.slice().reverse().findIndex((r,s,f)=>o!==-1&&f.length-s-1>=o?!1:!n.resolveDisabled(r));return a===-1?a:t.length-1-a}case 2:return t.findIndex((a,r)=>r<=o?!1:!n.resolveDisabled(a));case 3:{let a=t.slice().reverse().findIndex(r=>!n.resolveDisabled(r));return a===-1?a:t.length-1-a}case 4:return t.findIndex(a=>n.resolveId(a)===e.id);case 5:return null;default:ue(e)}})();return i===-1?u:i}function B(e){return[e.screenX,e.screenY]}function ie(){let e=c.useRef([-1,-1]);return{wasMoved(n){let t=B(n);return e.current[0]===t[0]&&e.current[1]===t[1]?!1:(e.current=t,!0)},update(n){e.current=B(n)}}}let K=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function j(e){var n,t;let u=(n=e.innerText)!=null?n:"",o=e.cloneNode(!0);if(!(o instanceof HTMLElement))return u;let i=!1;for(let r of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))r.remove(),i=!0;let a=i?(t=o.innerText)!=null?t:"":u;return K.test(a)&&(a=a.replace(K,"")),a}function le(e){let n=e.getAttribute("aria-label");if(typeof n=="string")return n.trim();let t=e.getAttribute("aria-labelledby");if(t){let u=t.split(" ").map(o=>{let i=document.getElementById(o);if(i){let a=i.getAttribute("aria-label");return typeof a=="string"?a.trim():j(i).trim()}return null}).filter(Boolean);if(u.length>0)return u.join(", ")}return j(e).trim()}function se(e){let n=c.useRef(""),t=c.useRef("");return I(()=>{let u=e.current;if(!u)return"";let o=u.innerText;if(n.current===o)return t.current;let i=le(u).trim().toLowerCase();return n.current=o,t.current=i,i})}var ce=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ce||{}),de=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(de||{}),fe=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(fe||{});function A(e,n=t=>t){let t=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,u=re(n(e.items.slice()),i=>i.dataRef.current.domRef.current),o=t?u.indexOf(t):null;return o===-1&&(o=null),{items:u,activeItemIndex:o}}let me={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,n)=>{var t;let u=A(e),o=oe(n,{resolveItems:()=>u.items,resolveActiveIndex:()=>u.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});return{...e,...u,searchQuery:"",activeItemIndex:o,activationTrigger:(t=n.trigger)!=null?t:1}},3:(e,n)=>{let t=e.searchQuery!==""?0:1,u=e.searchQuery+n.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+t).concat(e.items.slice(0,e.activeItemIndex+t)):e.items).find(a=>{var r;return((r=a.dataRef.current.textValue)==null?void 0:r.startsWith(u))&&!a.dataRef.current.disabled}),i=o?e.items.indexOf(o):-1;return i===-1||i===e.activeItemIndex?{...e,searchQuery:u}:{...e,searchQuery:u,activeItemIndex:i,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,n)=>{let t=A(e,u=>[...u,{id:n.id,dataRef:n.dataRef}]);return{...e,...t}},6:(e,n)=>{let t=A(e,u=>{let o=u.findIndex(i=>i.id===n.id);return o!==-1&&u.splice(o,1),u});return{...e,...t,activationTrigger:1}}},O=c.createContext(null);O.displayName="MenuContext";function C(e){let n=c.useContext(O);if(n===null){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,C),t}return n}function pe(e,n){return H(n.type,me,e,n)}let ve=c.Fragment;function Ie(e,n){let{__demoMode:t=!1,...u}=e,o=c.useReducer(pe,{__demoMode:t,menuState:t?0:1,buttonRef:c.createRef(),itemsRef:c.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:i,itemsRef:a,buttonRef:r},s]=o,f=P(n);J([r,a],(x,h)=>{var d;s({type:1}),Z(h,ee.Loose)||(x.preventDefault(),(d=r.current)==null||d.focus())},i===0);let v=I(()=>{s({type:1})}),y=c.useMemo(()=>({open:i===0,close:v}),[i,v]),g={ref:f};return _.createElement(O.Provider,{value:o},_.createElement(G,{value:H(i,{0:F.Open,1:F.Closed})},T({ourProps:g,theirProps:u,slot:y,defaultTag:ve,name:"Menu"})))}let ge="button";function be(e,n){var t;let u=N(),{id:o=`headlessui-menu-button-${u}`,...i}=e,[a,r]=C("Menu.Button"),s=P(a.buttonRef,n),f=V(),v=I(d=>{switch(d.key){case m.Space:case m.Enter:case m.ArrowDown:d.preventDefault(),d.stopPropagation(),r({type:0}),f.nextFrame(()=>r({type:2,focus:b.First}));break;case m.ArrowUp:d.preventDefault(),d.stopPropagation(),r({type:0}),f.nextFrame(()=>r({type:2,focus:b.Last}));break}}),y=I(d=>{switch(d.key){case m.Space:d.preventDefault();break}}),g=I(d=>{if(z(d.currentTarget))return d.preventDefault();e.disabled||(a.menuState===0?(r({type:1}),f.nextFrame(()=>{var R;return(R=a.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})})):(d.preventDefault(),r({type:0})))}),x=c.useMemo(()=>({open:a.menuState===0}),[a]),h={ref:s,id:o,type:ne(e,a.buttonRef),"aria-haspopup":"menu","aria-controls":(t=a.itemsRef.current)==null?void 0:t.id,"aria-expanded":a.menuState===0,onKeyDown:v,onKeyUp:y,onClick:g};return T({ourProps:h,theirProps:i,slot:x,defaultTag:ge,name:"Menu.Button"})}let ye="div",xe=Q.RenderStrategy|Q.Static;function Re(e,n){var t,u;let o=N(),{id:i=`headlessui-menu-items-${o}`,...a}=e,[r,s]=C("Menu.Items"),f=P(r.itemsRef,n),v=Y(r.itemsRef),y=V(),g=X(),x=g!==null?(g&F.Open)===F.Open:r.menuState===0;c.useEffect(()=>{let l=r.itemsRef.current;l&&r.menuState===0&&l!==v?.activeElement&&l.focus({preventScroll:!0})},[r.menuState,r.itemsRef,v]),ae({container:r.itemsRef.current,enabled:r.menuState===0,accept(l){return l.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});let h=I(l=>{var D,M;switch(y.dispose(),l.key){case m.Space:if(r.searchQuery!=="")return l.preventDefault(),l.stopPropagation(),s({type:3,value:l.key});case m.Enter:if(l.preventDefault(),l.stopPropagation(),s({type:1}),r.activeItemIndex!==null){let{dataRef:p}=r.items[r.activeItemIndex];(M=(D=p.current)==null?void 0:D.domRef.current)==null||M.click()}W(r.buttonRef.current);break;case m.ArrowDown:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Next});case m.ArrowUp:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Previous});case m.Home:case m.PageUp:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.First});case m.End:case m.PageDown:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Last});case m.Escape:l.preventDefault(),l.stopPropagation(),s({type:1}),$().nextFrame(()=>{var p;return(p=r.buttonRef.current)==null?void 0:p.focus({preventScroll:!0})});break;case m.Tab:l.preventDefault(),l.stopPropagation(),s({type:1}),$().nextFrame(()=>{te(r.buttonRef.current,l.shiftKey?U.Previous:U.Next)});break;default:l.key.length===1&&(s({type:3,value:l.key}),y.setTimeout(()=>s({type:4}),350));break}}),d=I(l=>{switch(l.key){case m.Space:l.preventDefault();break}}),R=c.useMemo(()=>({open:r.menuState===0}),[r]),S={"aria-activedescendant":r.activeItemIndex===null||(t=r.items[r.activeItemIndex])==null?void 0:t.id,"aria-labelledby":(u=r.buttonRef.current)==null?void 0:u.id,id:i,onKeyDown:h,onKeyUp:d,role:"menu",tabIndex:0,ref:f};return T({ourProps:S,theirProps:a,slot:R,defaultTag:ye,features:xe,visible:x,name:"Menu.Items"})}let he=c.Fragment;function De(e,n){let t=N(),{id:u=`headlessui-menu-item-${t}`,disabled:o=!1,...i}=e,[a,r]=C("Menu.Item"),s=a.activeItemIndex!==null?a.items[a.activeItemIndex].id===u:!1,f=c.useRef(null),v=P(n,f);w(()=>{if(a.__demoMode||a.menuState!==0||!s||a.activationTrigger===0)return;let p=$();return p.requestAnimationFrame(()=>{var k,L;(L=(k=f.current)==null?void 0:k.scrollIntoView)==null||L.call(k,{block:"nearest"})}),p.dispose},[a.__demoMode,f,s,a.menuState,a.activationTrigger,a.activeItemIndex]);let y=se(f),g=c.useRef({disabled:o,domRef:f,get textValue(){return y()}});w(()=>{g.current.disabled=o},[g,o]),w(()=>(r({type:5,id:u,dataRef:g}),()=>r({type:6,id:u})),[g,u]);let x=I(()=>{r({type:1})}),h=I(p=>{if(o)return p.preventDefault();r({type:1}),W(a.buttonRef.current)}),d=I(()=>{if(o)return r({type:2,focus:b.Nothing});r({type:2,focus:b.Specific,id:u})}),R=ie(),S=I(p=>R.update(p)),l=I(p=>{R.wasMoved(p)&&(o||s||r({type:2,focus:b.Specific,id:u,trigger:0}))}),D=I(p=>{R.wasMoved(p)&&(o||s&&r({type:2,focus:b.Nothing}))}),M=c.useMemo(()=>({active:s,disabled:o,close:x}),[s,o,x]);return T({ourProps:{id:u,ref:v,role:"menuitem",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:d,onPointerEnter:S,onMouseEnter:S,onPointerMove:l,onMouseMove:l,onPointerLeave:D,onMouseLeave:D},theirProps:i,slot:M,defaultTag:he,name:"Menu.Item"})}let Se=E(Ie),Me=E(be),we=E(Re),Fe=E(De),$e=Object.assign(Se,{Button:Me,Items:we,Item:Fe});function Ee({title:e,titleId:n,...t},u){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:u,"aria-labelledby":n},t),e?c.createElement("title",{id:n},e):null,c.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const Pe=c.forwardRef(Ee),Ne=Pe;export{Ne as C,$e as i};

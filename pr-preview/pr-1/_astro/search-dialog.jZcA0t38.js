import{j as e}from"./jsx-runtime.pwZL9jDf.js";import{r as s}from"./index.9AF9g4V4.js";import{_ as u,L as S,F}from"./fuse.esm._rttH7AJ.js";import{S as C}from"./search.a504rn97.js";import{t as m}from"./transition.cYFSBffZ.js";import"./use-owner.zs_RELrr.js";import"./index.dtczethA.js";import"./createLucideIcon.f6gkYqPm.js";function R({currentPath:c}){const[a,n]=s.useState(!1),[r,d]=s.useState([]),[o,i]=s.useState([]),[f,x]=s.useState(!1),[p,h]=s.useState(null),[g,j]=s.useState(""),y={keys:["title"]};function v(){n(!1)}function N(){n(!0)}s.useEffect(()=>{a&&(x(!0),h(null),fetch(`/api/search/${c.split("/")[2]}.json`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{d(t),i(t.slice(0,3))}).catch(t=>{h(t.message),console.error("Error fetching data:",t)}).finally(()=>{x(!1)}))},[a]);function b(t){const l=t.target.value;j(l);const w=new F(r,y).search(l).map(k=>k.item);i(l===""?r.slice(0,3):w)}return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:N,className:"dark:hover:bg-darkGray inline-flex items-center justify-center  gap-x-1.5 rounded-md  border border-border bg-background2 px-3 py-2 text-xs font-medium leading-none text-sortText  shadow-sm hover:bg-gray-50 md:px-3.5 md:py-2.5 md:text-sm",children:[e.jsx(C,{className:"text-sm text-foreground",size:16}),"Search"]}),e.jsx(m,{appear:!0,show:a,as:s.Fragment,children:e.jsxs(u,{as:"div",className:"relative z-10",onClose:v,children:[e.jsx(m.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-slate-900/25 opacity-100 backdrop-blur transition-opacity"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-hidden",children:e.jsx("div",{className:"mt-12  flex  min-h-full items-start justify-center p-4 text-center md:mt-28",children:e.jsx(m.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(u.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-lg    p-6 text-left align-middle  transition-all ",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"block w-full rounded-lg border  bg-background2 py-3 pl-4 pr-12 text-base text-foreground placeholder:text-textGray focus:outline-none sm:text-sm sm:leading-6",placeholder:"Search for projects",value:g,onChange:b}),e.jsx("svg",{className:"pointer-events-none absolute right-4 top-3 h-6 w-6 fill-sortText",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20.47 21.53a.75.75 0 1 0 1.06-1.06l-1.06 1.06Zm-9.97-4.28a6.75 6.75 0 0 1-6.75-6.75h-1.5a8.25 8.25 0 0 0 8.25 8.25v-1.5ZM3.75 10.5a6.75 6.75 0 0 1 6.75-6.75v-1.5a8.25 8.25 0 0 0-8.25 8.25h1.5Zm6.75-6.75a6.75 6.75 0 0 1 6.75 6.75h1.5a8.25 8.25 0 0 0-8.25-8.25v1.5Zm11.03 16.72-5.196-5.197-1.061 1.06 5.197 5.197 1.06-1.06Zm-4.28-9.97c0 1.864-.755 3.55-1.977 4.773l1.06 1.06A8.226 8.226 0 0 0 18.75 10.5h-1.5Zm-1.977 4.773A6.727 6.727 0 0 1 10.5 17.25v1.5a8.226 8.226 0 0 0 5.834-2.416l-1.061-1.061Z"})})," "]}),f?e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(S,{className:"mr-2 h-6 w-6 animate-spin text-primary"})}):p?e.jsxs("div",{className:"mt-6 rounded-lg bg-primary/10 px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-bold text-primary",children:"Something Bad Happened"}),e.jsx("p",{className:"mt-1 line-clamp-4",children:p})]}):a?e.jsx("div",{className:"mt-6 flex  max-h-[450px] flex-col   gap-y-5 overflow-y-auto lg:max-h-[600px]  xl:max-h-[600px]",children:o.length===0?e.jsx("p",{className:"flex items-center justify-center",children:"No results found"}):o.map((t,l)=>e.jsx(Z,{title:t.title,link:t.link,description:t.projectDescription,tag:t.tags[0],image:t.projectImage.src,author:t.author,date:t.pubDate},l))}):null]})})})})]})})]})}const Z=({title:c,link:a,description:n,tag:r,image:d,author:o,date:i})=>e.jsx("a",{href:a,children:e.jsxs("div",{className:"border-md flex w-full",children:[e.jsx("div",{className:"hidden max-w-[180px] flex-shrink-0 overflow-hidden rounded-l-[8px]   sm:flex md:max-w-[257px]",children:e.jsx("img",{width:600,height:600,src:d,className:"aspect-video h-full object-cover"})}),e.jsxs("div",{className:" w-full  items-center rounded-l-[8px] rounded-r-[8px] bg-background2 px-4 py-4   sm:rounded-l-none sm:px-2 md:px-6 md:py-6",children:[e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsxs("p",{className:"text-[8px] font-medium leading-none text-cardGray",children:["by ",o]}),e.jsx("p",{className:"rounded-full  px-2  text-[8px]  font-medium text-cardGray",children:r.charAt(0).toUpperCase()+r.slice(1)})]}),e.jsx("h3",{className:"mt-2 text-[10px] font-bold md:text-xs",children:c}),e.jsx("div",{className:"sm:hidden md:block   ",children:e.jsx("p",{className:"mt-2 line-clamp-2   text-[10px] ",children:n})}),e.jsxs("p",{className:"mt-2 inline-flex items-center text-[8px] font-medium text-cardGray",children:["5 Min Read",e.jsx("span",{className:"mx-1  block h-0.5 w-0.5 rounded-full bg-para"}),e.jsx("span",{className:"text-[8px] text-cardGray",children:i})]})]})]})});export{R as default};

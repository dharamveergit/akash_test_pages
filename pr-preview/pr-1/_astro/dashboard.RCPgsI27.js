import{j as e}from"./jsx-runtime.pwZL9jDf.js";import{r as l}from"./index.9AF9g4V4.js";import{u as L,a as v,r as D,I as q}from"./index.ei0rORiJ.js";import{H as J,a as K,b as W}from"./hover-card.cpNzcSEX.js";import{g as $}from"./utils.Ns-jr401.js";import{i as u,C as G}from"./ChevronDownIcon.vGghy2Kt.js";import{t as O}from"./transition.cYFSBffZ.js";import{C as X}from"./CheckIcon.UtM5bnIg.js";import{a as Y,B as Z}from"./axios._CAjQ25O.js";import{u as ee,Q as te,a as se}from"./useQuery.foJ5vCJg.js";import{S as ae}from"./search.a504rn97.js";import"./index.AUyx9_qk.js";import"./index.dtczethA.js";import"./index.lOYCi_Uj.js";import"./clsx.2Jv0kmJG.js";import"./use-owner.zs_RELrr.js";import"./use-resolve-button-type.FOQ-GfPc.js";import"./createLucideIcon.f6gkYqPm.js";const ne=({value:t})=>{const n=L();l.useState("green");const[r,s]=l.useState(0),[i,g]=l.useState(n.formatNumber(t,{style:"percent",maximumFractionDigits:0}));return l.useEffect(()=>{parseFloat(i)>80?s(0):parseFloat(i)>60?s(2):parseFloat(i)>40?s(4):parseFloat(i)>20?s(6):s(7)},[i]),e.jsx("div",{className:"flex w-full gap-x-1",children:[...Array(7)].map((c,m)=>e.jsx("div",{className:`flex h-1 w-full ${m>=7-r?"bg-gray-200":"bg-[#73EA94]"}`},m))})};function re({provider:t}){const n=t.isOnline?t.activeStats.cpu/1e3:0,r=t.isOnline?t.pendingStats.cpu/1e3:0,s=t.isOnline?(t.availableStats.cpu+t.pendingStats.cpu+t.activeStats.cpu)/1e3:0;t.isOnline&&t.activeStats.gpu,t.isOnline&&t.pendingStats.gpu,t.isOnline&&t.availableStats.gpu+t.pendingStats.gpu+t.activeStats.gpu;const i=t.hardwareGpuModels.map(x=>x.substring(x.lastIndexOf(" ")+1,x.length)),g=t.isOnline?v(t.activeStats.memory+t.pendingStats.memory):null,c=t.isOnline?v(t.availableStats.memory+t.pendingStats.memory+t.activeStats.memory):null;t.isOnline&&v(t.activeStats.storage+t.pendingStats.storage),t.isOnline&&v(t.availableStats.storage+t.pendingStats.storage+t.activeStats.storage);const m=L(),d=t?.name?.split(".")?.[t?.name?.split(".")?.length-2];return console.log(d),e.jsxs("div",{className:"flex w-full flex-col overflow-hidden rounded-lg border   bg-background2 p-4",children:[e.jsxs("div",{className:"flex gap-x-[10px]",children:[e.jsxs("div",{className:"flex h-12 w-12 items-center justify-center rounded border  bg-[#FAF9F8] text-xl  font-extrabold uppercase dark:bg-background2",children:[d?.[0],d?.[1]]}),e.jsxs("div",{children:[e.jsx("p",{className:"break-words  text-base font-bold text-foreground",children:t.name?.length>20?e.jsx("span",{children:$(t.name,4,13)}):e.jsx("span",{children:t.name})}),e.jsx("p",{className:"break-words  text-xs text-cardGray",children:t.hostUri?.length>20?e.jsx("span",{children:$(t.hostUri,4,13)}):e.jsx("span",{children:t.hostUri})})]})]}),e.jsx("div",{className:" mt-[10px] border-b   pb-3",children:e.jsx("p",{className:`inline-flex items-center  rounded-full px-2      py-1 text-xs font-medium  ${t.isAudited?"bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20":"bg-yellow-50 text-yellow-800 ring-1 ring-inset ring-yellow-600/20"}`,children:t.isAudited?"Audited":"Pending"})}),e.jsxs("div",{className:"mt-3 flex flex-col items-center justify-between ",children:[e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("p",{className:"text-xs font-medium",children:`Uptime: ${m.formatNumber(t.uptime7d,{style:"percent",maximumFractionDigits:0})}`}),e.jsx("p",{className:"text-xs font-medium text-foreground",children:"7 D"})]}),e.jsx("div",{className:" mt-3  w-full",children:e.jsx(ne,{value:t.uptime7d})})]}),e.jsxs("div",{className:"  mt-3  flex flex-col gap-y-[6px]",children:[e.jsx(w,{componentName:"CPU:",isOver60Percent:Math.round((n+r)/s*100)>60,value:`${Math.round(n+r)} / ${Math.round(s)}`}),e.jsxs("div",{className:"flex w-full items-center   justify-between rounded-sm border  p-2",children:[e.jsx("p",{className:" text-xs font-medium",children:"GPU:"}),e.jsxs("div",{className:"flex items-center justify-center gap-x-1",children:[i.slice(0,1).map((x,p)=>e.jsx("p",{className:"rounded-full  border border-[#D1D5DB] bg-[#F4F4F4] px-2   text-2xs  font-bold text-cardGray",children:x},p)),i.length>2&&e.jsxs(J,{children:[e.jsx(K,{children:e.jsx("p",{className:"cursor-pointer  rounded-full  border border-[#D1D5DB] bg-[#F4F4F4] px-2   text-2xs  font-bold text-cardGray",children:`+${i.length-1}`})}),e.jsx(W,{children:e.jsx("div",{className:"flex w-52 flex-wrap gap-x-2 gap-y-2 rounded-lg bg-white p-2",children:i.slice(1).map((x,p)=>e.jsx("p",{className:"rounded-full  border border-[#D1D5DB] bg-[#F4F4F4] px-2   text-2xs  font-bold text-cardGray",children:x}))})})]})]})]}),e.jsx(w,{componentName:"Memory:",value:`${D(g?.value,0)} ${g?.unit} /  ${D(c?.value,0)} ${c?.unit} `,isOver60Percent:(t.activeStats.memory+t.pendingStats.memory)/(t.availableStats.memory+t.pendingStats.memory+t.activeStats.memory)>.64}),e.jsx(w,{componentName:"Active Leases:",value:t.leaseCount}),t.ipRegion&&t.ipCountry&&e.jsx(w,{componentName:"Region:",value:`${t.ipRegionCode}, ${t.ipCountryCode}`})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("a",{target:"_blank",href:`https://deploy.cloudmos.io/providers/${t.owner}`,className:"hover:text-primarytext-xs flex cursor-pointer items-center  gap-x-2 text-foreground",children:["View on Cloudmos",e.jsx(le,{})]})})]})}function w({componentName:t,value:n,isOver60Percent:r}){return e.jsxs("div",{className:"flex w-full items-center   justify-between rounded-sm border border-[#E6E8EB]   p-[9px] text-cardGray",children:[e.jsx("p",{className:"  text-xs   font-medium",children:t}),e.jsx("p",{className:` text-xs font-medium text-foreground ${r?"text-primary":""}`,children:n})]})}function le(){return e.jsx("svg",{width:"6",height:"9",viewBox:"0 0 6 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M1 8L5 4.5L1 1",stroke:"#272540","stroke-width":"0.52259","stroke-linecap":"round","stroke-linejoin":"round"})})}function F(...t){return t.filter(Boolean).join(" ")}const ie=({onIsFilteringActiveClick:t,isFilteringActive:n,onIsFilteringAuditedClick:r,isFilteringAudited:s,className:i})=>e.jsxs(u,{as:"div",className:F(i,"relative inline-block text-left"),children:[e.jsx("div",{children:e.jsxs(u.Button,{className:"inline-flex w-full  items-center justify-center gap-x-1.5 rounded-md border  bg-background2 px-3 py-2 text-xs font-medium shadow-sm  ",children:["Filter by",e.jsx(G,{className:"-mr-1 h-4 w-4 text-foreground","aria-hidden":"true"})]})}),e.jsx(O,{as:l.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx(u.Items,{className:"absolute left-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-background2 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsxs("div",{className:"py-1",children:[e.jsx(u.Item,{children:({active:g})=>e.jsx("p",{onClick:()=>{t(!n),r(!1)},className:F(n?"bg-gray-100 dark:bg-darkGray":"","block px-4 py-2 text-sm text-para"),children:"Active"})}),e.jsx(u.Item,{children:({active:g})=>e.jsx("p",{onClick:()=>{r(!s),t(!1)},className:F(s?"bg-gray-100  dark:bg-darkGray":"","block px-4 py-2 text-sm text-para"),children:"Audited"})})]})})})]}),N=({children:t,className:n,href:r,active:s})=>e.jsx("a",{href:r,className:`
  ${n}
  ${s?"!border-primary text-primary":" text-sortText"}
  cursor-pointer rounded-[6px] border   bg-background2  px-[11px] py-[7px] text-xs font-normal  leading-normal  shadow-sm hover:border-primary  hover:text-primary md:px-[13px] md:py-[9px] md:text-sm`,children:t}),oe=({pathName:t})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"sidebar-scroll flex items-center gap-[10px] overflow-x-scroll py-2 md:gap-[10px] md:overflow-x-hidden lg:justify-center",children:[e.jsx("div",{children:e.jsx(N,{href:"/ecosystem/showcase/latest",active:t[2]==="showcase",children:"Showcase"})}),e.jsx("div",{children:e.jsx(N,{href:"/ecosystem/akash-tools/latest",active:t[2]==="akash-tools",children:"Tools"})}),e.jsx("div",{children:e.jsx(N,{href:"/ecosystem/deployed-on-akash/latest",active:t[2]==="deployed-on-akash",children:"Deployed"})}),e.jsx("div",{children:e.jsx(N,{href:"/ecosystem/providers",active:t[2]==="providers",children:"Providers"})})]})});function ce(t,n){const r=n.find(s=>s.id===t);return r?r.title:"Unknown Sort Option"}function de({currentSort:t,sortOptions:n,setSort:r}){return e.jsxs(u,{as:"div",className:"relative inline-block text-left",children:[e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Sort:"}),e.jsxs(u.Button,{className:"dark:hover:bg-darkGray inline-flex  w-full justify-center gap-x-1.5 rounded-md border bg-background2 px-3 py-2 text-sm  font-semibold text-sortText shadow-sm hover:bg-gray-50",children:[ce(t,n),e.jsx(G,{className:"-mr-1 h-5 w-5 text-foreground","aria-hidden":"true"})]})]}),e.jsx(O,{as:l.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx(u.Items,{className:"absolute right-0 z-10 mt-4 w-56 origin-top-right divide-y divide-gray-100 rounded-lg border  bg-background2 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsx("div",{className:"space-y-1 px-2 py-3",children:n.map(s=>e.jsx(u.Item,{children:({active:i})=>e.jsxs("button",{onClick:()=>r(s.id),className:`${t===s.id?"dark:bg-darkGray bg-gray-100":"text-foreground"} group flex w-full items-center justify-start rounded-md px-2 py-2 text-sm font-medium`,children:[e.jsx(X,{className:`${t===s.id?"visible":"invisible"} mr-1 h-4 w-4`,"aria-hidden":"true"}),s.title]})},s.id))})})})]})}async function me(){return(await Y.get(`${Z}/providers`)).data}function xe({initialProviders:t}){return ee(["PROVIDER_LIST"],()=>me(),{initialData:t,refetchInterval:2e3,refetchIntervalInBackground:!0})}const ue=new te;function Ue({pathName:t,initialProviders:n}){const[r,s]=l.useState("en-US");return l.useEffect(()=>{navigator?.language&&s(navigator?.language)},[]),e.jsx(se,{client:ue,children:e.jsx(q,{locale:r,defaultLocale:"en-US",children:e.jsx(fe,{pathName:t,initialProviders:n})})})}const ge=[{id:"active-leases-desc",title:"Active Leases (desc)"},{id:"active-leases-asc",title:"Active Leases (asc)"},{id:"gpu-available-desc",title:"GPUs Available (desc)"}];function fe({pathName:t,initialProviders:n}){const[r,s]=l.useState(!0),{data:i,isLoading:g}=xe({initialProviders:n}),[c,m]=l.useState(1),[d,x]=l.useState("active-leases-desc"),[p,U]=l.useState([]),[h,B]=l.useState(""),[b,T]=l.useState(!0),[E,pe]=l.useState(!1),[j,M]=l.useState(!1),[S,he]=l.useState(12),P=(c-1)*S,R=P+S,I=p.slice(P,R),y=Math.ceil(p.length/S);l.useEffect(()=>{if(i){let a=[...i];h&&(a=a.filter(o=>o.hostUri?.includes(h.toLowerCase())||o.owner?.includes(h.toLowerCase()))),b&&(a=a.filter(o=>o.isOnline)),j&&(a=a.filter(o=>o.isAudited)),a=a.sort((o,f)=>{if(d==="active-leases-desc")return f.leaseCount-o.leaseCount;if(d==="active-leases-asc")return o.leaseCount-f.leaseCount;if(d==="my-leases-desc")return f.userLeases-o.userLeases;if(d==="my-active-leases-desc")return f.userActiveLeases-o.userActiveLeases;if(d==="gpu-available-desc"){const V=f.availableStats.gpu+f.pendingStats.gpu+f.activeStats.gpu,z=o.availableStats.gpu+o.pendingStats.gpu+o.activeStats.gpu;return V-z}else return 1}),U(a)}},[i,b,E,j,h,d]);const _=()=>{c<y&&m(a=>a+1)},H=()=>{c>1&&m(a=>a-1)},k=a=>{m(1),T(a)},C=a=>{m(1),M(a)},A=l.useRef(null),Q=a=>{const o=a.target.value;B(o)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"container ",children:e.jsxs("div",{className:"mt-6 flex flex-col justify-between gap-x-6 pb-6 md:mt-8 md:pb-8 lg:mt-10 lg:flex-row lg:border-b lg:pb-10",children:[" ",e.jsx(oe,{pathName:t}),e.jsx("div",{className:"my-5 border-b  lg:hidden"}),e.jsxs("div",{className:"flex w-full flex-1 items-center justify-between gap-x-[32px]  lg:flex-row-reverse lg:justify-start lg:gap-x-[36px]",children:[e.jsx(ie,{onIsFilteringActiveClick:k,isFilteringActive:b,onIsFilteringAuditedClick:C,isFilteringAudited:j,className:" md:hidden"}),e.jsxs("div",{className:"relative  inline-flex h-9 w-24 items-center justify-between  rounded-md border  bg-background2 px-2 pl-6 text-center text-xs leading-[18px]  text-foreground transition-all duration-300 ease-in-out focus-within:w-[50%]  focus-within:pl-2 md:h-11   md:w-32 md:pl-8 md:pr-4  md:text-base md:font-bold ",children:[r&&e.jsx("button",{className:"absolute left-2",onClick:()=>A?.current?.focus(),children:e.jsx(ae,{className:"w-4 md:w-5"})}),e.jsx("input",{ref:A,type:"text",className:" h-full w-full rounded-lg bg-transparent p-1 outline-none  placeholder:font-normal placeholder:text-foreground",placeholder:"Search",onFocus:()=>s(!1),onBlur:()=>s(!0),value:h,onChange:Q})]})]})]})}),g?e.jsx("div",{className:"container mt-10",children:"loading..."}):e.jsxs("div",{className:"container mt-10 flex justify-between lg:gap-x-[20px] xl:gap-x-[48px]",children:[e.jsxs("div",{className:"hidden w-[200px] flex-shrink-0 pt-5 lg:block",children:[e.jsx("p",{className:"text-sm font-medium leading-[20px] text-cardGray",children:"Filter By"}),e.jsx("div",{className:"border-b pb-2"}),e.jsxs("div",{className:"mt-4 flex flex-col gap-y-4",children:[e.jsx("p",{onClick:()=>{k(!0),C(!1)},className:`inline-flex cursor-pointer text-base font-medium  hover:text-primary ${b?"text-primary":"text-para"}`,children:"Active"}),e.jsx("p",{onClick:()=>{C(!0),k(!1)},className:`inline-flex cursor-pointer text-base font-medium  hover:text-primary ${j?"text-primary":"text-para"}`,children:"Audited"})]}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"my-8 border-b pb-2"}),e.jsx("p",{className:"text-sm font-medium text-para",children:"Start Earning and join our community today!"}),e.jsx("button",{className:"mt-3 rounded-lg border border-[#D1D5DB] bg-background2 px-4 py-2 text-center font-medium ",children:"Become a Provider"})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-[20px] font-bold leading-[28px] md:text-2lg md:leading-[48px]",children:"Providers"}),e.jsx("div",{className:"flex flex-shrink-0 items-center gap-x-3 md:gap-x-3 lg:gap-x-9",children:e.jsx(de,{setSort:x,currentSort:d,sortOptions:ge})})]}),I.length===0&&e.jsx("p",{children:"No providers found"}),e.jsx("div",{className:"mt-4   grid w-full grid-cols-1 gap-5  sm:grid-cols-2    md:grid-cols-2 md:gap-5   lg:grid-cols-2  lg:gap-5  xl:grid-cols-3 ",children:I.map(a=>e.jsx(re,{provider:a},a.owner))}),e.jsxs("div",{className:"mb-10 mt-10 flex w-full items-center  justify-between",children:[e.jsxs("div",{className:"flex flex-shrink-0 space-x-4",children:[c!==1&&e.jsx("button",{disabled:c===1,onClick:H,className:"inline-flex items-center justify-center  gap-x-1.5 rounded-md border  bg-background px-2.5 py-1.5 text-sm font-medium  leading-none text-textGray shadow-sm hover:bg-gray-50 dark:bg-darkGray lg:px-3 lg:py-2",children:"Previous"}),c!==y&&e.jsx("button",{onClick:_,disabled:c===y,className:"inline-flex items-center justify-center  gap-x-1.5 rounded-md border bg-background  px-2.5 py-1.5 text-sm font-medium  leading-none text-textGray shadow-sm hover:bg-gray-50 dark:bg-darkGray lg:px-3 lg:py-2",children:"Next"})]}),e.jsxs("p",{className:"text-xs md:text-base",children:["Page: ",c," / ",y]})]})]})]})]})}export{Ue as default};

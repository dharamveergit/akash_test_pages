import{j as e}from"./jsx-runtime.pwZL9jDf.js";import{r as s}from"./index.9AF9g4V4.js";import{_ as g,L as F,F as E}from"./fuse.esm._rttH7AJ.js";import{t as d}from"./transition.cYFSBffZ.js";import"./use-owner.zs_RELrr.js";import"./index.dtczethA.js";import"./createLucideIcon.f6gkYqPm.js";function S({title:n,titleId:r,...a},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const R=s.forwardRef(S),L=R;function H({currentPath:n}){const[r,a]=s.useState(!1),[o,l]=s.useState([]),[c,p]=s.useState([]),[j,m]=s.useState(!1),[h,u]=s.useState(null),[x,w]=s.useState("");console.log(c);const y={keys:["title","body"]};function b(){a(!1)}function v(){a(!0)}s.useEffect(()=>{r&&(m(!0),u(null),fetch(`/api/search/${n.split("/")[1]}.json`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{l(t),p(t.slice(0,3))}).catch(t=>{u(t.message),console.error("Error fetching data:",t)}).finally(()=>{m(!1)}))},[r]);function N(t){const i=t.target.value;w(i);const f=new E(o,y).search(i);console.log(f);const k=f.map(C=>C.item);p(i===""?o.slice(0,3):k)}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:v,className:`flex cursor-pointer items-stretch justify-between gap-5 rounded border border-solid  bg-gray-50 bg-opacity-80 py-1.5 pl-3.5 pr-2 transition-transform duration-100 ease-in hover:translate-y-0.5 hover:transform  dark:bg-background2
        lg:w-[384px]`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 text-cardGray dark:text-para",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M8.25 14.25C11.5637 14.25 14.25 11.5637 14.25 8.25C14.25 4.93629 11.5637 2.25 8.25 2.25C4.93629 2.25 2.25 4.93629 2.25 8.25C2.25 11.5637 4.93629 14.25 8.25 14.25Z","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M15.7469 15.7508L12.4844 12.4883","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),e.jsx("div",{className:"grow whitespace-nowrap text-center text-sm leading-5 ",children:"Search docs..."})]}),e.jsxs("div",{className:"flex items-center justify-between gap-1 rounded border border-solid  bg-gray-100 py-px pl-2  pr-2  dark:bg-background",children:[e.jsx("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/TEMP/969e5b8d-6781-4fbb-a805-3e1404e74ab4?apiKey=2f02a73d37034e3f87e18c6bf22f47a0&",className:"my-auto aspect-square w-3 max-w-full shrink-0 overflow-hidden object-contain object-center"}),e.jsx("div",{className:"grow self-stretch whitespace-nowrap text-center text-xs leading-5 text-para",children:"K"})]})]}),e.jsx(d,{appear:!0,show:r,as:s.Fragment,children:e.jsxs(g,{as:"div",className:"relative z-40",onClose:b,children:[e.jsx(d.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-slate-900/25 opacity-100 backdrop-blur transition-opacity"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-hidden",children:e.jsx("div",{className:"mt-10  flex  min-h-full items-start justify-center p-4 text-center md:mt-[96px]",children:e.jsx(d.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(g.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-lg  border  border-[#808080] bg-background2 p-6 text-left align-middle shadow-lg transition-all ",children:[e.jsx("input",{className:"w-full rounded-lg border px-4 py-2 outline-none focus:border-primary/40 dark:bg-background ",placeholder:"Search for projects",value:x,onChange:N}),j?e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(F,{className:"mr-2 h-6 w-6 animate-spin text-primary"})}):h?e.jsxs("div",{className:"mt-6 rounded-lg bg-primary/10 px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-bold text-primary",children:"Something Bad Happened"}),e.jsx("p",{className:"mt-1 line-clamp-4",children:h})]}):r?e.jsx("div",{className:"mt-6 max-h-[420px] overflow-y-auto",children:c.length===0?e.jsx("p",{className:"flex items-center justify-center",children:"No results found"}):c.map((t,i)=>e.jsx(T,{title:t.title,link:t.slug,query:x,description:t.body},i))}):null]})})})})]})})]})}const M=({text:n,query:r})=>{const a=n.split(new RegExp(`(${r})`,"gi"));return console.log(a),e.jsx(e.Fragment,{children:a.map((o,l)=>l%2===0?e.jsx("span",{children:o},l):e.jsx("span",{className:" underline",children:o},l))})},T=({title:n,link:r,query:a,description:o})=>(n.replace(new RegExp(`(${a})`,"gi"),l=>`    <span className="bg-primary/40">${l}</span>`),e.jsx("a",{href:`/docs/${r}/`,children:e.jsxs("div",{className:"flex cursor-pointer items-center justify-between rounded-lg p-4 text-[#808080] hover:bg-primary/10 hover:text-primary md:px-6 md:py-4",children:[e.jsxs("div",{className:"w-[85%]",children:[e.jsx("h3",{className:"text-base font-bold  md:text-lg",children:e.jsx(M,{text:n,query:a})}),e.jsx("p",{className:"mt-1 line-clamp-1",children:o})]}),e.jsx("div",{children:e.jsx(L,{className:"h-5 w-5 md:h-8 md:w-8 "})})]})}));export{H as default};
